<div (click)="$event.stopPropagation()" class="add-people-container">
    <div class="top-container">
        <span>Leute hinzufügen</span>
        <div (click)="channelModalService.toggleShowAddPeople()" class="close-icon"></div>
    </div>
    <div class="channel-name-container">
        <svg width="24" height="24" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_58555_8757" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
                height="25">
                <rect y="0.5" width="24" height="24" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_58555_8757)">
                <path
                    d="M7.24995 20.5C6.93328 20.5 6.67495 20.375 6.47495 20.125C6.27495 19.875 6.21662 19.6 6.29995 19.3L6.99995 16.5H4.77495C4.44162 16.5 4.17495 16.371 3.97495 16.113C3.77495 15.8543 3.71661 15.5667 3.79995 15.25C3.84995 15.0167 3.96662 14.8333 4.14995 14.7C4.33328 14.5667 4.54162 14.5 4.77495 14.5H7.49995L8.49995 10.5H5.77495C5.44161 10.5 5.17495 10.371 4.97495 10.113C4.77495 9.85433 4.71662 9.56667 4.79995 9.25C4.84995 9.01667 4.96662 8.83333 5.14995 8.7C5.33328 8.56667 5.54162 8.5 5.77495 8.5H8.99995L9.82495 5.225C9.87495 5.00833 9.98328 4.83333 10.1499 4.7C10.3166 4.56667 10.5166 4.5 10.7499 4.5C11.0666 4.5 11.3249 4.625 11.5249 4.875C11.7249 5.125 11.7833 5.4 11.6999 5.7L10.9999 8.5H14.9999L15.8249 5.225C15.8749 5.00833 15.9833 4.83333 16.1499 4.7C16.3166 4.56667 16.5166 4.5 16.7499 4.5C17.0666 4.5 17.3249 4.625 17.5249 4.875C17.7249 5.125 17.7833 5.4 17.6999 5.7L16.9999 8.5H19.2249C19.5583 8.5 19.8249 8.629 20.0249 8.887C20.2249 9.14567 20.2833 9.43333 20.1999 9.75C20.15 9.98333 20.0333 10.1667 19.8499 10.3C19.6666 10.4333 19.4583 10.5 19.2249 10.5H16.4999L15.4999 14.5H18.2249C18.5583 14.5 18.8249 14.629 19.0249 14.887C19.2249 15.1457 19.2833 15.4333 19.1999 15.75C19.1499 15.9833 19.0333 16.1667 18.8499 16.3C18.6666 16.4333 18.4583 16.5 18.2249 16.5H14.9999L14.1749 19.775C14.1249 19.9917 14.0166 20.1667 13.8499 20.3C13.6833 20.4333 13.4833 20.5 13.2499 20.5C12.9333 20.5 12.6749 20.375 12.4749 20.125C12.2749 19.875 12.2166 19.6 12.2999 19.3L12.9999 16.5H8.99995L8.17495 19.775C8.12495 19.9917 8.01661 20.1667 7.84995 20.3C7.68328 20.4333 7.48328 20.5 7.24995 20.5ZM9.49995 14.5H13.4999L14.4999 10.5H10.4999L9.49995 14.5Z"
                    fill="#797EF3" />
            </g>
        </svg>
        <span>{{firebaseChannelService.currentChannelName}}</span>
    </div>
    <div class="search-user-input-container">
        <input [(ngModel)]="searchUser" (input)="filterSearchingUsers()" class="search-user" type="text"
            name="searchUser" id="searchUser" placeholder="Name eingeben" autocomplete="off">
        @if(filteredUsers.length > 0 && searchUser !== '' || selectedUsers.length > 0) {
        <div class="search-user-container">
            @if(filteredUsers.length > 0 && searchUser !== ''){
            @for (user of filteredUsers; track $index) {
            <div (click)="addUserToChannel($index)" class="user">
                <div class="avatar">
                    <img src="{{user.avatar}}" alt="avatar">
                    <div class="status-container">
                        <div class="status-dot" [ngClass]="user.online ? 'online' : 'offline'"></div>
                    </div>
                </div>
                <div class="name">
                    {{user.name}}
                </div>
            </div>
            }
            } @else {
            @for (user of selectedUsers; track $index) {
            <div class="selected-user">
                <img src="{{user.avatar}}" alt="avatar">
                <div class="name">
                    {{user.name}}
                </div>
                <div (click)="removeUserFromChannel($index)" class="close-container">
                    <svg width="10" height="10" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M6.9998 8.3998L2.0998 13.2998C1.91647 13.4831 1.68314 13.5748 1.3998 13.5748C1.11647 13.5748 0.883138 13.4831 0.699805 13.2998C0.516471 13.1165 0.424805 12.8831 0.424805 12.5998C0.424805 12.3165 0.516471 12.0831 0.699805 11.8998L5.5998 6.9998L0.699805 2.0998C0.516471 1.91647 0.424805 1.68314 0.424805 1.3998C0.424805 1.11647 0.516471 0.883138 0.699805 0.699805C0.883138 0.516471 1.11647 0.424805 1.3998 0.424805C1.68314 0.424805 1.91647 0.516471 2.0998 0.699805L6.9998 5.5998L11.8998 0.699805C12.0831 0.516471 12.3165 0.424805 12.5998 0.424805C12.8831 0.424805 13.1165 0.516471 13.2998 0.699805C13.4831 0.883138 13.5748 1.11647 13.5748 1.3998C13.5748 1.68314 13.4831 1.91647 13.2998 2.0998L8.3998 6.9998L13.2998 11.8998C13.4831 12.0831 13.5748 12.3165 13.5748 12.5998C13.5748 12.8831 13.4831 13.1165 13.2998 13.2998C13.1165 13.4831 12.8831 13.5748 12.5998 13.5748C12.3165 13.5748 12.0831 13.4831 11.8998 13.2998L6.9998 8.3998Z"
                            fill="black" />
                    </svg>
                </div>
            </div>
            }
            }
        </div>
        }
    </div>
    <div class="button-container">
        <button (click)="saveCurrentChannelToUsers()" class="inactive-button"
            [ngClass]="{'active-button': selectedUsers.length > 0}"
            [disabled]="selectedUsers.length === 0">hinzufügen</button>
    </div>
</div>